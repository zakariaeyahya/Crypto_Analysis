## D2.7 — Création des splits Train / Validation / Test (Reddit)

**Dépendance**: D2.6 (jeu de données nettoyé)

### Objectif
Créer des découpages temporels pour l'entraînement et l'évaluation du modèle, sans fuite de données (future leakage), à partir de `data/silver/reddit/cleaned_reddit_dataset.csv`.

### Stratégie de split (strictement temporelle)
- **Train**: Jours 1 à 21 (≈ 70%)
- **Validation**: Jours 22 à 25 (≈ 15%)
- **Test**: Jours 26 à 30 (≈ 15%)

Les « jours 1 à 30 » sont définis comme les 30 premiers jours calendaires uniques présents dans le dataset, ordonnés chronologiquement. Aucune donnée au-delà de ce fenêtre n'est utilisée dans les splits.

> Important: **aucun mélange (shuffle) à travers le temps**. On découpe par plages temporelles continues pour éviter toute fuite du futur vers le passé.

### Colonnes requises
- `created_date` (obligatoire) — doit être parsable en datetime.
- `sentiment` (optionnel) — s'il existe, il sera simplement décrit dans les sorties, mais pas « stratifié » (la stratification ne doit pas casser l'ordre temporel).

### Emplacement des sorties
Les fichiers sont produits dans `data/silver/reddit/`:
- `train_data.csv`
- `validation_data.csv`
- `test_data.csv`

### Script utilisé
`data_cleaning/Script/CreateTemporalSplits.py`

Fonctions principales:
- Charge `cleaned_reddit_dataset.csv`
- Convertit `created_date` en datetime et trie les données
- Identifie les 30 premiers jours uniques
- Assigne les splits (1–21: train, 22–25: validation, 26–30: test)
- Sauvegarde les trois fichiers de sortie
- Affiche un bref récapitulatif (tailles et, si présent, distribution du `sentiment`)

### Exécution (Windows / PowerShell)
Depuis la racine du projet `Crypto_Analysis`:

```bash
venv\Scripts\python data_cleaning\Script\CreateTemporalSplits.py
```

Sortie attendue (exemple):

```text
Saved:
 - data\silver\reddit\train_data.csv -> 12345 rows
 - data\silver\reddit\validation_data.csv -> 2456 rows
 - data\silver\reddit\test_data.csv -> 2567 rows
```

Si `sentiment` est présent, le script imprime aussi la distribution relative par split.

### Caractéristiques du split (à documenter après exécution)
- **Période couverte (jours 1–30)**: du `min(created_date)` jusqu'au 30e jour calendaire unique inclus.
- **Tailles**:
  - Train: N_train
  - Validation: N_val
  - Test: N_test
- **(Optionnel) Répartition du `sentiment`**:
  - Train: % par classe
  - Validation: % par classe
  - Test: % par classe

> Remarque: Si le dataset contient moins de 30 jours uniques, les derniers splits peuvent être partiellement vides.

### Contrôles de qualité
- Pas de `NaT` dans les jours utilisés pour les splits
- Ordre temporel respecté (aucun mélange)
- Fichiers de sortie non vides (sauf cas de données insuffisantes)

### Limites et évolutions possibles
- En présence d'un label `sentiment`, une « quasi-stratification » temporelle pourrait être envisagée via l'ajustement de bornes de jours pour équilibrer les classes, mais uniquement si cela ne casse pas la continuité temporelle.


